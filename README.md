# YH_MSA_COMMUNICATIONS π”§
> λ§μ΄ν¬λ΅μ„λΉ„μ¤ μ•„ν‚¤ν…μ²(MSA) ν†µμ‹  ν¨ν„΄ μ‹¤μµμ„ μ„ν• κ°μΈ ν”„λ΅μ νΈ

## 1. ν”„λ΅μ νΈ κ°μ” (Overview)

μ΄ ν”„λ΅μ νΈλ” λ§μ΄ν¬λ΅μ„λΉ„μ¤ μ•„ν‚¤ν…μ²(MSA)μ—μ„ μ‚¬μ©λλ” λ‹¤μ–‘ν• ν†µμ‹  ν¨ν„΄μ„ μ§μ ‘ κµ¬ν„ν•κ³  ν•™μµν•κΈ° μ„ν•΄ μ‹μ‘λμ—μµλ‹λ‹¤.

μ¤λΌμΌλ¦¬μ **ν΄λΌμ°λ“ λ„¤μ΄ν‹°λΈ μ• ν”λ¦¬μΌ€μ΄μ… λ””μμΈ ν¨ν„΄**μ—μ„ μ†κ°λ μ—¬λ¬ λ™κΈ°/λΉ„λ™κΈ° ν†µμ‹  κΈ°μ λ“¤μ„ μ΄λ΅ μΌλ΅λ§ μ ‘ν•λ” κ²ƒμ„ λ„μ–΄, μ‹¤μ  μ½”λ“λ΅ κ²½ν—ν•κ³  κ·Έ νΉμ§•μ„ μ²΄κ°ν•λ” κ²ƒμ„ λ©ν‘λ΅ ν•©λ‹λ‹¤.

ν„μ¬ **REST**μ™€ **gRPC**λ¥Ό μ΄μ©ν• λ™κΈ° ν†µμ‹  ν¨ν„΄ κµ¬ν„μ΄ μ™„λ£λμ—μΌλ©°, μ•μΌλ΅ **RabbitMQ(AMQP)**, **Kafka** λ“±μ„ μ΄μ©ν• λΉ„λ™κΈ° ν¨ν„΄μ„ μ¶”κ°€ν•΄λ‚κ° μμ •μ…λ‹λ‹¤.

## 2. MSA μ£Όμ” ν†µμ‹  ν¨ν„΄ μ •λ¦¬

ν”„λ΅μ νΈμ μ΄λ΅ μ  λ°°κ²½μ΄ λλ” MSA ν†µμ‹  ν¨ν„΄μ„ μ•„λμ™€ κ°™μ΄ μ •λ¦¬ν•©λ‹λ‹¤.

| κµ¬λ¶„ | ν¨ν„΄ μΆ…λ¥ | μ£Όμ” κΈ°μ  | ν•µμ‹¬ κ°λ… (μ„λΉ„μ¤/μ¤ν‚¤λ§ λ μ§€μ¤νΈλ¦¬) |
| :--- | :--- | :--- | :--- |
| **λ™κΈ° (Synchronous)** | μ”μ²­-μ‘λ‹µ (Request-Response)<br/>RPC (Remote Procedure Call) | REST, gRPC,<br/>GraphQL, WebSocket | "μ–΄λ””μ— λ³΄λ‚Όμ§€"λ¥Ό κ²°μ •ν•κΈ° μ„ν•΄ <br/> **μ„λΉ„μ¤ λ μ§€μ¤νΈλ¦¬(Service Registry)** λ¥Ό μ‚¬μ© |
| **λΉ„λ™κΈ° (Asynchronous)** | λ‹¨μΌ/λ‹¤μ¤‘ μμ‹ μ (Single/Multiple Receiver)<br/>λΉ„λ™κΈ° μ”μ²­-μ‘λ‹µ | AMQP (RabbitMQ),<br/>Kafka, NATS | "λ¬΄μ—‡μ„/μ–΄λ–»κ² λ³΄λ‚Όμ§€"λ¥Ό λ…μ„Έν•κΈ° μ„ν•΄ <br/> **μ¤ν‚¤λ§ λ μ§€μ¤νΈλ¦¬(Schema Registry)** λ¥Ό μ‚¬μ© |

-   **λ™κΈ° ν†µμ‹ **: ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚΄κ³ , μ‘λ‹µμ΄ μ¬ λ•κΉμ§€ κΈ°λ‹¤λ¦¬λ” λ°©μ‹μ…λ‹λ‹¤. κµ¬ν„μ΄ μ§κ΄€μ μ΄μ§€λ§, μ„λΉ„μ¤ κ°„μ κ²°ν•©λ„κ°€ λ†’μ•„μ§€κ³  μ¥μ• κ°€ μ „νλ  μ μμµλ‹λ‹¤.
-   **λΉ„λ™κΈ° ν†µμ‹ **: ν΄λΌμ΄μ–ΈνΈκ°€ μ”μ²­(λ©”μ‹μ§€)μ„ λ³΄λ‚΄κ³  λ°”λ΅ λ‹¤λ¥Έ μ‘μ—…μ„ μν–‰ν•  μ μλ” λ°©μ‹μ…λ‹λ‹¤. μ„λΉ„μ¤ κ°„ κ²°ν•©λ„λ¥Ό λ‚®μ¶”κ³  νƒ„λ ¥μ„±μ„ λ†’μΌ μ μμ§€λ§, μ„¤κ³„κ°€ λ³µμ΅ν•κ³  μµμΆ… μ‘λ‹µμ„ λ³΄μ¥ν•κΈ° μ„ν• μ¶”κ°€μ μΈ κµ¬ν„μ΄ ν•„μ”ν•©λ‹λ‹¤.

## 3. κµ¬ν„λ κΈ°λ¥

-   [x] **RESTful API**λ¥Ό μ΄μ©ν• λ™κΈ° μ”μ²­-μ‘λ‹µ ν†µμ‹ 
-   [x] **gRPC**λ¥Ό μ΄μ©ν• 4κ°€μ§€ λ°©μ‹μ RPC ν†µμ‹ 
    -   [x] Unary RPC
    -   [x] Server Streaming RPC
    -   [x] Client Streaming RPC
    -   [x] Bidirectional Streaming RPC
-   [x] **Docker**λ¥Ό μ΄μ©ν• κ° μ„λΉ„μ¤μ μ»¨ν…μ΄λ„ν™” (`Dockerfile`)
-   [x] **Docker Compose**λ¥Ό μ΄μ©ν• λ‹¤μ¤‘ μ»¨ν…μ΄λ„ κ΄€λ¦¬
-   [x] **AWS EC2**λ¥Ό μ΄μ©ν• ν΄λΌμ°λ“ ν™κ²½ λ°°ν¬ λ° ν…μ¤νΈ

## 4. ν”„λ΅μ νΈ μ‚¬μ©λ²• (How to Use)

μ΄ ν”„λ΅μ νΈλ¥Ό ν…μ¤νΈν•λ” λ°©λ²•μ€ λ‘ κ°€μ§€μ…λ‹λ‹¤.

### 4.1. μ›κ²© μ„λ²„(AWS EC2)λ΅ ν…μ¤νΈν•λ” κ²½μ° (μ¶”μ²)

λ―Έλ¦¬ λ°°ν¬λ μ„λ²„λ¥Ό λ€μƒμΌλ΅ μ¦‰μ‹ ν…μ¤νΈν•  μ μλ” λ°©λ²•μ…λ‹λ‹¤. μ„λ²„λ” 24μ‹κ°„ μ‹¤ν–‰ μ¤‘μ…λ‹λ‹¤.

1.  **ν”„λ΅μ νΈ ν΄λ΅ **
    ```bash
    git clone [https://github.com/your-username/YH_MSA_COMMUNICATIONS.git](https://github.com/your-username/YH_MSA_COMMUNICATIONS.git)
    cd YH_MSA_COMMUNICATIONS
    ```

2.  **ν΄λΌμ΄μ–ΈνΈ μ„¤μ • ν™•μΈ**
    `client/src/main/resources/application.yml` νμΌμ νΈμ¤νΈ μ£Όμ†κ°€ μ•„λμ™€ κ°™μ΄ μ„¤μ •λμ–΄ μλ”μ§€ ν™•μΈν•©λ‹λ‹¤.
    ```yaml
    grpc:
      server:
        host: 43.201.23.166
        port: 9090

    Rest:
      server:
        host: 43.201.23.166
        port: 8080
    ```

3.  **ν΄λΌμ΄μ–ΈνΈ μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰**
    ν”„λ΅μ νΈ λ£¨νΈ λ””λ ‰ν† λ¦¬μ—μ„ μ•„λμ Gradle λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.
    ```bash
    ./gradlew :client:bootRun
    ```
    λ΅μ»¬ ν„°λ―Έλ„μ— AWS EC2 μ„λ²„μ™€ ν†µμ‹ ν•λ” κ²°κ³Όκ°€ μ¶λ ¥λ©λ‹λ‹¤.

### 4.2. λ΅μ»¬ ν™κ²½μ—μ„ μ§μ ‘ μ„λ²„λ¥Ό μ‹¤ν–‰ν•μ—¬ ν…μ¤νΈν•λ” κ²½μ°

λ΅μ»¬ PCμ—μ„ μ§μ ‘ μ„λ²„λ“¤μ„ μ‹¤ν–‰ν•μ—¬ ν…μ¤νΈν•λ” λ°©λ²•μ…λ‹λ‹¤.

1.  **ν”„λ΅μ νΈ ν΄λ΅ **
    ```bash
    git clone [https://github.com/your-username/YH_MSA_COMMUNICATIONS.git](https://github.com/your-username/YH_MSA_COMMUNICATIONS.git)
    cd YH_MSA_COMMUNICATIONS
    ```

2.  **ν΄λΌμ΄μ–ΈνΈ μ„¤μ • λ³€κ²½**
    `client/src/main/resources/application.yml` νμΌμ `host` μ£Όμ†λ¥Ό λ¨λ‘ `localhost`λ΅ λ³€κ²½ν•©λ‹λ‹¤.
    ```yaml
    grpc:
      server:
        host: localhost # λ³€κ²½
        port: 9090

    Rest:
      server:
        host: localhost # λ³€κ²½
        port: 8080
    ```

3.  **κ° μ„λ²„ μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰**
    **κ°κ° λ‹¤λ¥Έ ν„°λ―Έλ„ μ°½**μ„ μ—΄κ³ , μ•„λμ Gradle λ…λ Ήμ–΄λ¥Ό μ‹¤ν–‰ν•μ—¬ μ„λ²„λ“¤μ„ λ„μ›λ‹λ‹¤.
    
    * **ν„°λ―Έλ„ 1 (REST μ„λ²„):**
        ```bash
        ./gradlew :rest-service:bootRun
        ```
    * **ν„°λ―Έλ„ 2 (gRPC μ„λ²„):**
        ```bash
        ./gradlew :grpc-service:bootRun
        ```

4.  **ν΄λΌμ΄μ–ΈνΈ μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰**
    **λ λ‹¤λ¥Έ μƒ ν„°λ―Έλ„ μ°½**μ„ μ—΄κ³ , μ•„λ λ…λ Ήμ–΄λ΅ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.
    ```bash
    ./gradlew :client:bootRun
    ```
    λ΅μ»¬ PCμ—μ„ μ‹¤ν–‰ μ¤‘μΈ μ„λ²„λ“¤κ³Ό ν†µμ‹ ν•λ” κ²°κ³Όκ°€ μ¶λ ¥λ©λ‹λ‹¤.

## 5. ν”„λ΅μ νΈ κµ¬μ΅°
YH_MSA_COMMUNICATIONS/
β”β”€β”€ client/          # REST, gRPC ν΄λΌμ΄μ–ΈνΈ κµ¬ν„ λ° ν…μ¤νΈ λ¨λ“
β”β”€β”€ common/          # κ³µν†µ DTO, gRPC .proto νμΌ λ° μƒμ„±λ μ½”λ“ λ¨λ“
β”β”€β”€ grpc-service/    # gRPC μ„λ²„ κµ¬ν„ λ¨λ“
β”β”€β”€ rest-service/    # RESTful API μ„λ²„ κµ¬ν„ λ¨λ“
β”β”€β”€ build.gradle     # λ£¨νΈ ν”„λ΅μ νΈ λΉλ“ μ¤ν¬λ¦½νΈ
β”β”€β”€ settings.gradle  # λ©€ν‹° λ¨λ“ μ„¤μ •
β””β”€β”€ ...
